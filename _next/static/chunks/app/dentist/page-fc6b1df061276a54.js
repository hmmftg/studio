(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{41764:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>k});var a=i(95155),n=i(66695),t=i(85127),l=i(30285),c=i(26126),r=i(85057),d=i(30356),o=i(88539),h=i(12115),x=i(87481),m=i(55365),j=i(94063),u=i(17569),g=i(77223),p=i(34301),v=i(15873),N=i(61040),f=i(62523);let y=[{id:"p-004",name:"Diana Prince",service:"Dentistry",time:"10:35 AM",waitingFor:"12 mins",nationality:"Turkish",message:"My front tooth is chipped and it hurts when I drink cold water."}],w=["Ibuprofen","Amoxicillin"],b=async(e,s)=>new Promise(i=>{setTimeout(()=>{if(e.includes("\n"))return i(e.split("\n").map(e=>"[".concat(s,"] ").concat(e)).join("\n"));i("[".concat(s,"] ").concat(e))},500)}),A=async e=>new Promise(s=>{setTimeout(()=>{let i=e.toLowerCase(),a=w.find(e=>i.includes(e.toLowerCase()));a?s({isSafe:!1,advice:'The drug "'.concat(a,'" is currently unavailable. Please prescribe an alternative.')}):s({isSafe:!0,advice:""})},300)});function k(){let{toast:e}=(0,x.dj)(),[s,i]=(0,h.useState)(y),[k,C]=(0,h.useState)(null),[P,S]=(0,h.useState)([]),[T,D]=(0,h.useState)(!1),[E,F]=(0,h.useState)(""),[B,J]=(0,h.useState)(!1),[$,_]=(0,h.useState)(""),z=e=>{C(e),S([{id:1,drug:"",dosage:"",notes:""}]),F(""),_(e.message)},H=async(s,i)=>{if(s){D(!0),F("");try{let e=await b(s,i);F(e)}catch(s){console.error("Translation failed",s),e({variant:"destructive",title:"Translation Error",description:"Could not translate the text."})}finally{D(!1)}}},I=(e,s,i)=>{S(a=>a.map(a=>a.id===e?{...a,[s]:i,advice:void 0}:a))},M=async(e,s)=>{if(!(s.length<3)){J(!0);try{let i=await A(s);i.isSafe||S(s=>s.map(s=>s.id===e?{...s,advice:i.advice}:s))}catch(e){console.error("Prescription check failed",e)}finally{J(!1)}}},R=e=>{S(s=>s.filter(s=>s.id!==e))},Z=e=>e.map(e=>"- ".concat(e.drug," (").concat(e.dosage,"): ").concat(e.notes)).join("\n");return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dentist's Dashboard"}),k?(0,a.jsxs)(n.Zp,{className:"animate-in fade-in-50",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{children:["Consultation: ",k.name]}),(0,a.jsxs)(n.BT,{children:["Patient Nationality: ",(0,a.jsxs)("span",{className:"font-semibold flex items-center gap-2",children:[(0,N.x)((null==k?void 0:k.nationality)||"")," ",k.nationality]}),". Record diagnosis and prescribe the next steps."]})]}),(0,a.jsxs)(n.Wu,{className:"space-y-6",children:[$&&(0,a.jsxs)("div",{className:"p-3 bg-sky-100/50 rounded-md border border-sky-200",children:[(0,a.jsxs)(r.J,{className:"flex items-center gap-2 text-sm font-medium",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"})," Patient's Message:"]}),(0,a.jsxs)("p",{className:"text-sm text-foreground/80 mt-1 italic",children:['"',$,'"']}),(0,a.jsx)(l.$,{variant:"link",size:"sm",className:"p-0 h-auto",onClick:()=>H($,"English"),disabled:T,children:T?"Translating...":"Translate to English"})]}),(0,a.jsxs)(m.Fc,{children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)(m.XL,{children:"Pharmacy Notice"}),(0,a.jsxs)(m.TN,{children:["Unavailable drugs: ",(0,a.jsx)("strong",{children:w.join(", ")}),". Please prescribe alternatives."]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.J,{children:"Diagnosis Notes"}),(0,a.jsx)(o.T,{placeholder:"e.g., Patient reports toothache, evidence of cavity on upper molar..."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(r.J,{className:"text-base font-medium",children:"Prescription"}),(0,a.jsxs)(t.XI,{children:[(0,a.jsx)(t.A0,{children:(0,a.jsxs)(t.Hj,{children:[(0,a.jsx)(t.nd,{className:"w-2/5",children:"Drug / Service"}),(0,a.jsx)(t.nd,{className:"w-1/5",children:"Dosage / Schedule"}),(0,a.jsx)(t.nd,{className:"w-2/5",children:"Notes"}),(0,a.jsx)(t.nd,{className:"w-[50px]"})]})}),(0,a.jsx)(t.BF,{children:P.map(e=>(0,a.jsxs)(t.Hj,{children:[(0,a.jsxs)(t.nA,{children:[(0,a.jsx)(f.p,{placeholder:"e.g. Paracetamol",value:e.drug,onChange:s=>I(e.id,"drug",s.target.value),onBlur:()=>M(e.id,e.drug)}),e.advice&&(0,a.jsx)("p",{className:"text-xs text-destructive mt-1",children:e.advice})]}),(0,a.jsx)(t.nA,{children:(0,a.jsx)(f.p,{placeholder:"e.g. 500mg, twice a day",value:e.dosage,onChange:s=>I(e.id,"dosage",s.target.value)})}),(0,a.jsx)(t.nA,{children:(0,a.jsx)(f.p,{placeholder:"e.g. Take with food",value:e.notes,onChange:s=>I(e.id,"notes",s.target.value)})}),(0,a.jsx)(t.nA,{children:P.length>1&&(0,a.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>R(e.id),children:(0,a.jsx)(g.A,{className:"h-4 w-4 text-destructive"})})})]},e.id))})]}),(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>{S(e=>[...e,{id:Date.now(),drug:"",dosage:"",notes:""}])},children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"})," Add Item"]})]}),E&&(0,a.jsxs)("div",{className:"p-3 bg-muted rounded-md",children:[(0,a.jsx)(r.J,{className:"text-sm font-medium",children:"Translation:"}),(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:E})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)(r.J,{children:"Required Next Service"}),(0,a.jsxs)(d.z,{defaultValue:"pharmacy",className:"gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.C,{value:"pharmacy",id:"r1"}),(0,a.jsx)(r.J,{htmlFor:"r1",children:"Pharmacy (Painkillers)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.C,{value:"none",id:"r4"}),(0,a.jsx)(r.J,{htmlFor:"r4",children:"None / Discharge"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-4",children:[(0,a.jsxs)(l.$,{variant:"outline",onClick:()=>H(Z(P),(null==k?void 0:k.nationality)||"English"),disabled:T||0===P.length,children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),T?"Translating...":"Translate Prescription to ".concat(null==k?void 0:k.nationality)]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.$,{variant:"outline",onClick:()=>{C(null),S([])},children:"Cancel"}),(0,a.jsx)(l.$,{onClick:()=>{k&&(i(e=>e.filter(e=>e.id!==k.id)),e({title:"Patient Processed",description:"".concat(k.name," has been notified for their next service.")}),C(null),S([]))},children:"Submit & Notify Next Service"})]})]})]})]}):(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"My Consultation Queue"}),(0,a.jsx)(n.BT,{children:"Patients waiting for dental services."})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)(t.XI,{children:[(0,a.jsx)(t.A0,{children:(0,a.jsxs)(t.Hj,{children:[(0,a.jsx)(t.nd,{children:"Name"}),(0,a.jsx)(t.nd,{children:"Nationality"}),(0,a.jsx)(t.nd,{children:"Service"}),(0,a.jsx)(t.nd,{className:"hidden sm:table-cell",children:"Waiting Time"}),(0,a.jsx)(t.nd,{className:"text-right",children:"Action"})]})}),(0,a.jsx)(t.BF,{children:s.length>0?s.map(e=>(0,a.jsxs)(t.Hj,{children:[(0,a.jsx)(t.nA,{className:"font-medium",children:e.name}),(0,a.jsx)(t.nA,{children:(0,N.x)(e.nationality)}),(0,a.jsx)(t.nA,{children:(0,a.jsx)(c.E,{variant:"secondary",children:e.service})}),(0,a.jsx)(t.nA,{className:"hidden sm:table-cell text-muted-foreground",children:e.waitingFor}),(0,a.jsx)(t.nA,{className:"text-right",children:(0,a.jsx)(l.$,{size:"sm",onClick:()=>z(e),children:"Accept Patient"})})]},e.id)):(0,a.jsx)(t.Hj,{children:(0,a.jsx)(t.nA,{colSpan:5,className:"text-center h-24",children:"No patients waiting"})})})]})})]})]})})}},72107:(e,s,i)=>{Promise.resolve().then(i.bind(i,41764))}},e=>{var s=s=>e(e.s=s);e.O(0,[277,896,251,332,441,684,358],()=>s(72107)),_N_E=e.O()}]);