(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[328],{47562:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>C});var i=a(95155),n=a(66695),t=a(85127),l=a(30285),c=a(26126),r=a(85057),d=a(30356),o=a(88539),h=a(12115),x=a(87481),m=a(55365),j=a(94063),u=a(17569),g=a(77223),p=a(34301),v=a(15873),N=a(61040),f=a(62523);let y=[{id:"p-003",name:"Charlie Brown",service:"Healthcare",time:"10:32 AM",waitingFor:"15 mins",nationality:"Iranian",message:"I have a pounding headache and my vision is blurry."},{id:"p-004",name:"Diana Prince",service:"Dentistry",time:"10:35 AM",waitingFor:"12 mins",nationality:"Turkish",message:""}],b=["Ibuprofen","Amoxicillin"],w=async(e,s)=>new Promise(a=>{setTimeout(()=>{if(e.includes("\n"))return a(e.split("\n").map(e=>"[".concat(s,"] ").concat(e)).join("\n"));a("[".concat(s,"] ").concat(e))},500)}),A=async e=>new Promise(s=>{setTimeout(()=>{let a=e.toLowerCase(),i=b.find(e=>a.includes(e.toLowerCase()));i?s({isSafe:!1,advice:'The drug "'.concat(i,'" is currently unavailable. Please prescribe an alternative.')}):s({isSafe:!0,advice:""})},300)});function C(){let{toast:e}=(0,x.dj)(),[s,a]=(0,h.useState)(y),[C,P]=(0,h.useState)(null),[k,S]=(0,h.useState)([]),[T,F]=(0,h.useState)(!1),[D,J]=(0,h.useState)(""),[B,E]=(0,h.useState)(!1),[I,$]=(0,h.useState)(""),H=e=>{P(e),S([{id:1,drug:"",dosage:"",notes:""}]),J(""),$(e.message)},_=async(s,a)=>{if(s){F(!0),J("");try{let e=await w(s,a);J(e)}catch(s){console.error("Translation failed",s),e({variant:"destructive",title:"Translation Error",description:"Could not translate the text."})}finally{F(!1)}}},z=(e,s,a)=>{S(i=>i.map(i=>i.id===e?{...i,[s]:a,advice:void 0}:i))},L=async(e,s)=>{if(!(s.length<3)){E(!0);try{let a=await A(s);a.isSafe||S(s=>s.map(s=>s.id===e?{...s,advice:a.advice}:s))}catch(e){console.error("Prescription check failed",e)}finally{E(!1)}}},M=e=>{S(s=>s.filter(s=>s.id!==e))},R=e=>e.map(e=>"- ".concat(e.drug," (").concat(e.dosage,"): ").concat(e.notes)).join("\n");return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Doctor's Dashboard"}),C?(0,i.jsxs)(n.Zp,{className:"animate-in fade-in-50",children:[(0,i.jsxs)(n.aR,{children:[(0,i.jsxs)(n.ZB,{children:["Consultation: ",C.name]}),(0,i.jsxs)(n.BT,{children:["Patient Nationality: ",(0,i.jsxs)("span",{className:"font-semibold flex items-center gap-2",children:[(0,N.x)((null==C?void 0:C.nationality)||"")," ",C.nationality]}),". Record diagnosis and prescribe the next steps."]})]}),(0,i.jsxs)(n.Wu,{className:"space-y-6",children:[I&&(0,i.jsxs)("div",{className:"p-3 bg-sky-100/50 rounded-md border border-sky-200",children:[(0,i.jsxs)(r.J,{className:"flex items-center gap-2 text-sm font-medium",children:[(0,i.jsx)(j.A,{className:"h-4 w-4"})," Patient's Message:"]}),(0,i.jsxs)("p",{className:"text-sm text-foreground/80 mt-1 italic",children:['"',I,'"']}),(0,i.jsx)(l.$,{variant:"link",size:"sm",className:"p-0 h-auto",onClick:()=>_(I,"English"),disabled:T,children:T?"Translating...":"Translate to English"})]}),(0,i.jsxs)(m.Fc,{children:[(0,i.jsx)(u.A,{className:"h-4 w-4"}),(0,i.jsx)(m.XL,{children:"Pharmacy Notice"}),(0,i.jsxs)(m.TN,{children:["Unavailable drugs: ",(0,i.jsx)("strong",{children:b.join(", ")}),". Please prescribe alternatives."]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(r.J,{children:"Diagnosis Notes"}),(0,i.jsx)(o.T,{placeholder:"e.g., Patient reports headache and blurry vision..."})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(r.J,{className:"text-base font-medium",children:"Prescription"}),(0,i.jsxs)(t.XI,{children:[(0,i.jsx)(t.A0,{children:(0,i.jsxs)(t.Hj,{children:[(0,i.jsx)(t.nd,{className:"w-2/5",children:"Drug / Service"}),(0,i.jsx)(t.nd,{className:"w-1/5",children:"Dosage / Schedule"}),(0,i.jsx)(t.nd,{className:"w-2/5",children:"Notes"}),(0,i.jsx)(t.nd,{className:"w-[50px]"})]})}),(0,i.jsx)(t.BF,{children:k.map(e=>(0,i.jsxs)(t.Hj,{children:[(0,i.jsxs)(t.nA,{children:[(0,i.jsx)(f.p,{placeholder:"e.g. Paracetamol",value:e.drug,onChange:s=>z(e.id,"drug",s.target.value),onBlur:()=>L(e.id,e.drug)}),e.advice&&(0,i.jsx)("p",{className:"text-xs text-destructive mt-1",children:e.advice})]}),(0,i.jsx)(t.nA,{children:(0,i.jsx)(f.p,{placeholder:"e.g. 500mg, twice a day",value:e.dosage,onChange:s=>z(e.id,"dosage",s.target.value)})}),(0,i.jsx)(t.nA,{children:(0,i.jsx)(f.p,{placeholder:"e.g. Take with food",value:e.notes,onChange:s=>z(e.id,"notes",s.target.value)})}),(0,i.jsx)(t.nA,{children:k.length>1&&(0,i.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>M(e.id),children:(0,i.jsx)(g.A,{className:"h-4 w-4 text-destructive"})})})]},e.id))})]}),(0,i.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>{S(e=>[...e,{id:Date.now(),drug:"",dosage:"",notes:""}])},children:[(0,i.jsx)(p.A,{className:"mr-2 h-4 w-4"})," Add Item"]})]}),D&&(0,i.jsxs)("div",{className:"p-3 bg-muted rounded-md",children:[(0,i.jsx)(r.J,{className:"text-sm font-medium",children:"Translation:"}),(0,i.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:D})]}),(0,i.jsxs)("div",{className:"grid gap-3",children:[(0,i.jsx)(r.J,{children:"Required Next Service"}),(0,i.jsxs)(d.z,{defaultValue:"pharmacy",className:"gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(d.C,{value:"pharmacy",id:"r1"}),(0,i.jsx)(r.J,{htmlFor:"r1",children:"Pharmacy (Drugs)"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(d.C,{value:"lab",id:"r2"}),(0,i.jsx)(r.J,{htmlFor:"r2",children:"Lab Test"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(d.C,{value:"nursing",id:"r3"}),(0,i.jsx)(r.J,{htmlFor:"r3",children:"Nursing (Serum, Injection, etc.)"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(d.C,{value:"none",id:"r4"}),(0,i.jsx)(r.J,{htmlFor:"r4",children:"None / Discharge"})]})]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center pt-4",children:[(0,i.jsxs)(l.$,{variant:"outline",onClick:()=>_(R(k),(null==C?void 0:C.nationality)||"English"),disabled:T||0===k.length,children:[(0,i.jsx)(v.A,{className:"mr-2 h-4 w-4"}),T?"Translating...":"Translate Prescription to ".concat(null==C?void 0:C.nationality)]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(l.$,{variant:"outline",onClick:()=>{P(null),S([])},children:"Cancel"}),(0,i.jsx)(l.$,{onClick:()=>{C&&(a(e=>e.filter(e=>e.id!==C.id)),e({title:"Patient Processed",description:"".concat(C.name," has been notified for their next service.")}),P(null),S([]))},children:"Submit & Notify Next Service"})]})]})]})]}):(0,i.jsxs)(n.Zp,{children:[(0,i.jsxs)(n.aR,{children:[(0,i.jsx)(n.ZB,{children:"My Consultation Queue"}),(0,i.jsx)(n.BT,{children:"Patients waiting to be seen."})]}),(0,i.jsx)(n.Wu,{children:(0,i.jsxs)(t.XI,{children:[(0,i.jsx)(t.A0,{children:(0,i.jsxs)(t.Hj,{children:[(0,i.jsx)(t.nd,{children:"Name"}),(0,i.jsx)(t.nd,{children:"Nationality"}),(0,i.jsx)(t.nd,{children:"Service"}),(0,i.jsx)(t.nd,{className:"hidden sm:table-cell",children:"Waiting Time"}),(0,i.jsx)(t.nd,{className:"text-right",children:"Action"})]})}),(0,i.jsx)(t.BF,{children:s.length>0?s.map(e=>(0,i.jsxs)(t.Hj,{children:[(0,i.jsx)(t.nA,{className:"font-medium",children:e.name}),(0,i.jsx)(t.nA,{children:(0,N.x)(e.nationality)}),(0,i.jsx)(t.nA,{children:(0,i.jsx)(c.E,{variant:"secondary",children:e.service})}),(0,i.jsx)(t.nA,{className:"hidden sm:table-cell text-muted-foreground",children:e.waitingFor}),(0,i.jsx)(t.nA,{className:"text-right",children:(0,i.jsx)(l.$,{size:"sm",onClick:()=>H(e),children:"Accept Patient"})})]},e.id)):(0,i.jsx)(t.Hj,{children:(0,i.jsx)(t.nA,{colSpan:5,className:"text-center h-24",children:"No patients waiting"})})})]})})]})]})})}},81451:(e,s,a)=>{Promise.resolve().then(a.bind(a,47562))}},e=>{var s=s=>e(e.s=s);e.O(0,[277,896,251,332,441,684,358],()=>s(81451)),_N_E=e.O()}]);